{% assign giscus = site.comments.giscus %}
{% if giscus.repo and giscus.repo_id and giscus.category and giscus.category_id %}
  <div class="giscus-thread">
    <script src="https://giscus.app/client.js"
            data-repo="{{ giscus.repo }}"
            data-repo-id="{{ giscus.repo_id }}"
            data-category="{{ giscus.category }}"
            data-category-id="{{ giscus.category_id }}"
            data-mapping="{{ giscus.mapping | default: 'pathname' }}"
            data-strict="1"
            data-reactions-enabled="{{ giscus.reactions_enabled | default: '1' }}"
            data-emit-metadata="{{ giscus.emit_metadata | default: '0' }}"
            data-input-position="{{ giscus.input_position | default: 'bottom' }}"
            data-theme="{{ giscus.theme | default: 'preferred_color_scheme' }}"
            data-lang="{{ giscus.lang | default: page.lang | default: site.lang | default: 'en' }}"
            data-loading="{{ giscus.lazy | default: true | jsonify | replace: 'true','lazy' | replace: 'false','eager' }}"
            crossorigin="{{ giscus.crossorigin | default: 'anonymous' }}"
            async>
    </script>
    <noscript>Please enable JavaScript to view the comments powered by Giscus.</noscript>
  </div>
{% else %}
  <div class="notice--warning">
    <p>Comments are currently unavailable because giscus is not fully configured for this site.</p>
  </div>
{% endif %}
