{% if site.adsense.enabled and site.adsense.client_id and include.slot_id %}
<div class="adsense-unit" aria-label="Advertisement">
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="{{ site.adsense.client_id }}"
       data-ad-slot="{{ include.slot_id }}"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
    (function() {
      function tryRender() {
        if (window.siteConsentState !== "granted") return;
        if (window.adsbygoogle && window.adsbygoogle.push) {
          (adsbygoogle = window.adsbygoogle || []).push({});
        }
      }
      tryRender();
      document.addEventListener("consent:update", function(event) {
        if (event && event.detail && event.detail.state === "granted") {
          tryRender();
        }
      });
    })();
  </script>
</div>
{% endif %}
