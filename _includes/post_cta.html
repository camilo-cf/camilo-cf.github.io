{% assign ui = site.data.ui-text[page.lang] | default: site.data.ui-text[site.lang] | default: site.data.ui-text["en"] %}

{% comment %} Build locale-aware URLs for CTAs {% endcomment %}
{% assign current_lang = page.lang | default: site.lang | default: "en" %}
{% assign contact_url = site.cta.contact_url | default: "/en/contact/" %}
{% assign subscribe_url = site.cta.subscribe_url | default: "/newsletter/" %}
{% assign case_study_url = site.cta.case_study_url | default: "" %}

{% comment %} Override with locale-specific URLs if available {% endcomment %}
{% if current_lang == "es-419" %}
  {% assign contact_url = "/es-419/contacto/" %}
  {% assign subscribe_url = "/es-419/newsletter/" %}
  {% assign case_study_url = "/es-419/casos/" %}
{% elsif current_lang == "pt-br" or current_lang == "pt-BR" %}
  {% assign contact_url = "/pt-br/contato/" %}
  {% assign subscribe_url = "/pt-br/newsletter/" %}
  {% assign case_study_url = "/pt-br/casos/" %}
{% elsif current_lang == "en" %}
  {% assign contact_url = "/en/contact/" %}
  {% assign subscribe_url = "/newsletter/" %}
  {% assign case_study_url = "/en/case-studies/" %}
{% endif %}

<div class="post-cta">
  <h3>{{ ui.post_cta_title | default: "Continue the conversation" }}</h3>
  <p>{{ ui.post_cta_description | default: "Need a sounding board for ML, GenAI, or measurement decisions? Reach out or follow along with new playbooks." }}</p>
  <div class="post-cta__actions">
    <a class="btn btn--primary" href="{{ contact_url | relative_url }}">{{ ui.post_cta_contact | default: "Contact" }}</a>
    <a class="btn" href="{{ subscribe_url | relative_url }}">{{ ui.post_cta_subscribe | default: "Subscribe via RSS or email" }}</a>
    {% if site.cta.show_case_study and case_study_url != "" %}
      <a class="btn" href="{{ case_study_url | relative_url }}">{{ ui.post_cta_case_study | default: "See a case study" }}</a>
    {% endif %}
  </div>
</div>

<style>
.post-cta {
  margin: 2rem 0;
  padding: 1.25rem;
  border: 1px solid #e5e5e5;
  border-radius: 8px;
  background: #f9fafb;
}
.post-cta__actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.5rem;
}
</style>
