<!-- Google Analytics 4 (GA4) -->
<!-- Note: When consent banner is enabled, consent.js handles GA4 loading after user consent -->
{% if site.analytics.google.tracking_id %}
  {% unless site.consent_banner.enabled %}
    <!-- Consent banner disabled: Load GA4 directly -->
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.analytics.google.tracking_id }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{{ site.analytics.google.tracking_id }}');
    </script>
  {% else %}
    <!-- Consent banner enabled: Setup handled by consent.js -->
    <script>
      window.dataLayer = window.dataLayer || [];
      window.gtag = window.gtag || function(){dataLayer.push(arguments);};
    </script>
  {% endunless %}
{% endif %}
